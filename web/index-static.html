<html>
<head>
  <title>Monster Hunter Item Search</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>

  <style>
      .flex {
          width: 100%;
          height: 100%;
          display: flex;
          flex-direction: column;
      }

      label {
          font-weight: bold;
          font-family: sans, sans-serif;
      }

      #output { flex: 99 1 auto; }
  </style>

  <script type="text/javascript">
      var DATA_PATH = get_base_path() + "/rewards/";

      $(document).ready(function(){
          $("#search").click(update_search);
          $("#item").keypress(function(e) {
              if (e.which == 13) { update_search(); }
          });
          setup_autocomplete();
      });

      function encode_utf8(s) {
          return unescape(encodeURIComponent(s));
      }

      function get_base_path() {
          var path = document.location.pathname;
          return path.substring(0, path.lastIndexOf('/'));
      }

      function setup_autocomplete() {
          $.getJSON(DATA_PATH + "items.json",
                    function(data) {
                        $("#item").autocomplete({ source: data });
                    });
      }

      function update_search() {
          var item_name = $.trim($("#item").val());

          $.get(DATA_PATH + encode_utf8(item_name) + ".txt",
                function(data) {
                    $("#output").text(data);
                }).fail(
                function() {
                    $("#output").text("Error: item '" + item_name + "' not found");
                });
      }
  </script>
</head>
<body>
<div class="flex">
  <div>
    <label for="item">Item:</label>
    <input id="item" type="text" size="20" />
    <button id="search">Ask Poogie</button>
    <a href="https://github.com/bd4/monster-hunter-scripts/blob/master/RECOMMENDATIONS.adoc">Understanding Results</a> 
    (<a href="https://github.com/bd4/monster-hunter-scripts">source</a>)
  </div>
  <br />
  <textarea readonly="true" rows="10" cols="80" id="output"></textarea>
</div>
</body>
